<div>
    <button class="btn btn-sm btn-default" target="_self" href="#instanceBrowserModal" data-toggle="modal" ng-disabled="field.nonEditable"
            data-backdrop="static" ng-disabled="field.nonEditable" ng-click="setRelatedEntity(field)" ng-if="addedEntity || selectedInstance && !instanceId && !showTrashInstance"
            ui-validate="{relationshipValidation: 'validateRelationshipPresence(field)'}" ui-validate-watch="'field.value.length'" ng-model="field.value">
        <i class="fa fa-fw fa-plus"></i>
        {{msg('mds.dataBrowsing.addRelatedInstance')}}
    </button>
    <br/>
    <div ng-repeat="obj in [].concat(field.value)">
        <div class="related-instances-block" ng-if="obj !== '' && obj !== null">
            <div class="related-instance-display">
                {{field.displayValue[obj.id]}}
            </div>
            <div class="pull-right" ng-if="addedEntity || selectedInstance && !instanceId && !showTrashInstance">
                <a class="btn btn-sm btn-primary" ng-disabled="field.nonEditable" ng-click="editInstanceOfEntity(obj.id, getMetadata(field, 'related.class'))"
                   data-toggle="tooltip" data-placement="top" data-trigger="hover" bs-popover="{{msg('mds.dataBrowsing.editRelatedInstance')}}">
                    <i class="fa fa-lg fa-cogs"></i>
                    {{msg('mds.dataBrowsing.edit')}}
                </a>
                <a class="btn btn-sm btn-danger" ng-disabled="field.nonEditable" ng-click="removeManyRelatedData(field, obj)" ng-disabled="field.nonEditable"
                   data-toggle="tooltip" data-placement="top" data-trigger="hover" bs-popover="{{msg('mds.dataBrowsing.removeRelatedInstance')}}">
                    <i class="fa fa-lg fa-minus"></i>
                </a>
            </div>
        </div>
    </div>
</div>